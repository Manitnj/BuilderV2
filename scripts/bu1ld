#!/bin/bash
cd ~/work
rm -rf build/soong
git clone https://github.com/Evolution-X/build_soong.git -b tiramisu build/soong

export CCACHE_DIR=/tmp/ccache
export CCACHE_EXEC=$(which ccache)
export USE_CCACHE=1
ccache -M 150G
ccache -o compression=true
ccache -z

export ANDROID_JACK_VM_ARGS="-Xmx16g -Dfile.encoding=UTF-8 -XX:+TieredCompilation"
export BUILD_BROKEN_MISSING_REQUIRED_MODULES=true
export ALLOW_MISSING_DEPENDENCIES=true 

. build/envsetup.sh
lunch "$LUNCH_COMBO"
mka "$TARGET" -j8 & sleep 100m
